(()=>{"use strict";var e={1259:(e,o,t)=>{t(5363),t(71);var n=t(8880),a=t(9592),r=t(3673);const l=(0,r.Uk)(" Qpon App "),s=(0,r.Uk)("User Info"),u=(0,r.Uk)("Logout");function i(e,o,t,n,a,i){const c=(0,r.up)("q-btn"),d=(0,r.up)("q-toolbar-title"),p=(0,r.up)("q-icon"),m=(0,r.up)("q-item-section"),g=(0,r.up)("q-item-label"),f=(0,r.up)("q-item"),v=(0,r.up)("q-list"),h=(0,r.up)("q-btn-dropdown"),w=(0,r.up)("q-toolbar"),b=(0,r.up)("q-header"),y=(0,r.up)("links-list"),C=(0,r.up)("q-drawer"),_=(0,r.up)("router-view"),Z=(0,r.up)("q-page-container"),D=(0,r.up)("q-layout"),k=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(D,{view:"lHh Lpr lFf"},{default:(0,r.w5)((()=>[e.isLoggedIn?((0,r.wg)(),(0,r.j4)(b,{key:0,elevated:""},{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[l])),_:1}),(0,r.Wm)(h,{color:"primary","dropdown-icon":"person","no-icon-animation":!0,size:"lg",unelevated:""},{default:(0,r.w5)((()=>[(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(f,{clickable:"",onClick:e.userInfo},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{color:"primary",name:"feed"})])),_:1}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[s])),_:1})])),_:1})])),_:1},8,["onClick"]),[[k]]),(0,r.wy)((0,r.Wm)(f,{clickable:"",onClick:e.logout},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{color:"primary",name:"logout"})])),_:1}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[u])),_:1})])),_:1})])),_:1},8,["onClick"]),[[k]])])),_:1})])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),e.isLoggedIn?((0,r.wg)(),(0,r.j4)(C,{key:1,modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[0]||(o[0]=o=>e.leftDrawerOpen=o),"show-if-above":"",bordered:""},{default:(0,r.w5)((()=>[(0,r.Wm)(y)])),_:1},8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_)])),_:1})])),_:1})}const c=(0,r.Uk)(" Links ");function d(e,o,t,n,a,l){const s=(0,r.up)("q-item-label"),u=(0,r.up)("EssentialLink"),i=(0,r.up)("q-list");return(0,r.wg)(),(0,r.j4)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{header:""},{default:(0,r.w5)((()=>[c])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.essentialLinks,(e=>((0,r.wg)(),(0,r.j4)(u,(0,r.dG)({key:e.title},e),null,16)))),128))])),_:1})}var p=t(2323);function m(e,o,t,n,a,l){const s=(0,r.up)("q-icon"),u=(0,r.up)("q-item-section"),i=(0,r.up)("q-item-label"),c=(0,r.up)("q-item");return(0,r.wg)(),(0,r.j4)(c,{clickable:"",tag:"a",to:e.link},{default:(0,r.w5)((()=>[e.icon?((0,r.wg)(),(0,r.j4)(u,{key:0,avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:e.icon},null,8,["name"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,p.zw)(e.title),1)])),_:1}),(0,r.Wm)(i,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,p.zw)(e.caption),1)])),_:1})])),_:1})])),_:1},8,["to"])}const g=(0,r.aZ)({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});var f=t(4260),v=t(3414),h=t(2035),w=t(4554),b=t(2350),y=t(7518),C=t.n(y);const _=(0,f.Z)(g,[["render",m]]),Z=_;C()(g,"components",{QItem:v.Z,QItemSection:h.Z,QIcon:w.Z,QItemLabel:b.Z});const D={components:{EssentialLink:Z},data(){return{essentialLinks:[{title:"All Coupons",caption:"View all saved coupons",icon:"list",link:"/coupons"},{title:"Add Coupon",caption:"Add entries of coupons",icon:"add",link:"/add-coupon"},{title:"Export Monthly Coupons",caption:"Export monthly coupons report",icon:"summarize",link:"/export-coupons"}]}}};var k=t(7011);const q=(0,f.Z)(D,[["render",d]]),I=q;C()(D,"components",{QList:k.Z,QItemLabel:b.Z});var x=t(1959),E=t(3617),W=t(3964),S=t(9582);const L=(0,r.aZ)({components:{LinksList:I},setup(){const e=(0,x.iH)(!1),o=(0,E.oR)(),t=(0,S.tv)(),n=(0,x.Fl)((()=>o.getters["auth/getIsLoggedIn"]));let{dispatchAction:a}=(0,W.Z)();return{leftDrawerOpen:e,isLoggedIn:n,toggleLeftDrawer(){e.value=!e.value},userInfo(){t.replace({name:"user"})},logout(){const e=()=>{t.replace("/login")};a("auth/logout",{},e)}}}});var Q=t(3066),M=t(3812),N=t(9570),U=t(6819),A=t(3747),j=t(2670),V=t(2428),H=t(2652),T=t(677);const P=(0,f.Z)(L,[["render",i]]),Y=P;C()(L,"components",{QLayout:Q.Z,QHeader:M.Z,QToolbar:N.Z,QBtn:U.Z,QToolbarTitle:A.Z,QBtnDropdown:j.Z,QList:k.Z,QItem:v.Z,QItemSection:h.Z,QIcon:w.Z,QItemLabel:b.Z,QDrawer:V.Z,QPageContainer:H.Z}),C()(L,"directives",{ClosePopup:T.Z});var O=t(9922),F=t(7083);const B=(0,r.Uk)("Add Coupons"),R={class:"row"},z={class:"col-xs-12 col-md-6 q-pl-md"},K={class:"row justify-center"},$={class:"col-xs-12 col-md-6 q-pl-md"},J={class:"row"},G={class:"col-xs-6 saved-coupons-date-section"},X={class:"text-h6"},ee=(0,r.Uk)(" Saved Coupons "),oe={class:"saved-coupons-date"},te={class:"col-xs-6"},ne=(0,r.Uk)("Reset Data");function ae(e,o,t,n,a,l){const s=(0,r.up)("page-header"),u=(0,r.up)("date-input"),i=(0,r.up)("q-icon"),c=(0,r.up)("q-input"),d=(0,r.up)("q-btn"),m=(0,r.up)("q-form"),g=(0,r.up)("q-card-actions"),f=(0,r.up)("q-card-section"),v=(0,r.up)("q-separator"),h=(0,r.up)("q-toggle"),w=(0,r.up)("q-card"),b=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(b,{isLoading:n.isLoading,hasError:n.loadingFailed},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[B])),_:1}),(0,r._)("div",R,[(0,r._)("div",z,[(0,r.Wm)(m,{onSubmit:n.saveCoupon,class:"q-gutter-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:n.couponsDate,"onUpdate:modelValue":o[0]||(o[0]=e=>n.couponsDate=e),errorMessage:n.formSchema.couponsDate.errorMessage,hasError:n.formSchema.couponsDate.hasError},null,8,["modelValue","errorMessage","hasError"]),(0,r.Wm)(c,{filled:"",modelValue:n.couponNumber,"onUpdate:modelValue":o[1]||(o[1]=e=>n.couponNumber=e),modelModifiers:{number:!0},label:"Coupon Number","lazy-rules":"ondemand",rules:[n.formSchema.couponNumber.validate],"error-message":n.formSchema.couponNumber.errorMessage,error:n.formSchema.couponNumber.hasError},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"pin"})])),_:1},8,["modelValue","rules","error-message","error"]),(0,r._)("div",K,[(0,r.Wm)(d,{label:"Save Coupon",type:"submit",color:"primary",class:"bg-white","text-color":"primary",padding:"0.81rem"}),(0,r.Wm)(d,{label:"Save All",type:"button",color:"primary",onClick:n.saveAll,class:"q-ml-sm",padding:"0.81rem",disable:n.couponsArray.length<=0},null,8,["onClick","disable"])])])),_:1},8,["onSubmit"])]),(0,r._)("div",$,[(0,r.Wm)(w,{class:"q-mt-lg saved-coupons-section"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r._)("div",J,[(0,r._)("div",G,[(0,r._)("div",X,[ee,(0,r._)("span",oe,"(for "+(0,p.zw)(n.couponsDate)+")",1)])]),(0,r._)("div",te,[(0,r.Wm)(g,{style:{float:"right"}},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{onClick:n.resetData,outline:""},{default:(0,r.w5)((()=>[ne])),_:1},8,["onClick"])])),_:1})])])])),_:1}),(0,r.Wm)(v,{inset:""}),(0,r.Wm)(f,{class:"q-pa-md saved-coupons-main-content"},{default:(0,r.w5)((()=>[(0,r._)("p",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.couponsArray,(e=>((0,r.wg)(),(0,r.iD)("span",{key:e},[(0,r.Wm)(h,{modelValue:n.couponsArray,"onUpdate:modelValue":o[2]||(o[2]=e=>n.couponsArray=e),val:e,color:"green"},null,8,["modelValue","val"]),(0,r.Uk)((0,p.zw)(e),1)])))),128))])])),_:1})])),_:1})])])])),_:1},8,["isLoading","hasError"])}var re=t(2661),le=t(8825);const se=e=>{const o=re.ZP.formatDate(new Date,"DD-MM-YYYY").split("-"),t=new Date(o[2],parseInt(o[1])-1,o[0]),n=e.split("-"),a=new Date(n[2],parseInt(n[1])-1,n[0]),r=re.ZP.getDateDiff(t,a,"days");return parseInt(r)<0},ue={isDateGreaterThanToday:se};function ie(){const e=(e,o,t,n)=>""===e||null===e?"You have not entered a coupon":(e=parseInt(e),!t.includes(e)||e<=0?"The coupon you entered is invalid or does not exist":o.includes(e)?"You cannot enter the same coupon twice":"undefined"===typeof n||0===Object.keys(n).length||!n.coupons.includes(e)||"You have already entered this coupon for this date"),o=e=>{if(ue.isDateGreaterThanToday(e))return"Date is invalid or greater than today"};return{validateNumber:e,validateDate:o}}function ce(){const e=(0,x.iH)(!0),o=(0,x.iH)(!1);return{isLoading:e,loadingFailed:o}}function de(){const e=(0,E.oR)();let{isLoading:o,loadingFailed:t}=ce();const n=(0,x.iH)([]),a=async()=>{try{await e.dispatch("coupons/loadCouponEntries"),n.value=e.getters["coupons/getCouponEntries"]()}catch(a){t.value=!0}finally{o.value=!1}};return{loadCoupons:a,currentCouponData:n,isLoading:o,loadingFailed:t}}const pe={setup(){const e=(0,le.Z)(),o=(0,E.oR)(),t=(0,x.iH)(""),n=(0,x.iH)(re.ZP.formatDate(Date.now(),"DD-MM-YYYY")),a=(0,x.iH)([]),l=(0,x.iH)([]);(0,r.YP)(n,((e,o)=>{a.value=[],t.value=""}));let{dispatchAction:s,formSchema:u}=(0,W.Z)(),{loadCoupons:i,currentCouponData:c,isLoading:d,loadingFailed:p}=de(),{validateNumber:m,validateDate:g}=ie();const f=async()=>{const e=()=>{l.value=o.getters["coupons/getAvailableCouponNumbers"],i()};s("coupons/loadAvailableCouponNumbers",null,e)};f(),u.value={couponNumber:{validate:function(e){let o="";return o=i().then((()=>{const o=c.value.find((e=>e.date===n.value));return m(e,a.value,l.value,o)})),o},hasError:!1,errorMessage:""},couponsDate:{validate:function(){return g(n.value)},hasError:!1,errorMessage:""}},(0,S.iS)(((o,t,n)=>{a.value.length>0?e.dialog({title:"Confirm Page Leave",message:"You have unsaved coupons. Are you sure you want to leave?",persistent:!0,cancel:{label:"Stay on Page"},ok:{label:"Leave"}}).onOk((()=>{n()})).onCancel((()=>{n(!1)})):n()}));const v=()=>{a.value=[],t.value=""};return{couponNumber:t,couponsDate:n,couponsArray:a,availableCouponNumbers:l,loadCoupons:i,currentCouponData:c,isLoading:d,loadingFailed:p,formSchema:u,saveCoupon(){const e=parseInt(t.value);a.value.push(e),t.value=""},async saveAll(){const e=()=>{v()};s("coupons/saveCouponEntries",{date:n.value,coupons:a.value.join(",")},e)},resetData(){v()}}}};var me=t(8689),ge=t(1206),fe=t(151),ve=t(5589),he=t(9367),we=t(5869),be=t(8886);const ye=(0,f.Z)(pe,[["render",ae],["__scopeId","data-v-07b15872"]]),Ce=ye;C()(pe,"components",{QForm:me.Z,QInput:ge.Z,QIcon:w.Z,QBtn:U.Z,QCard:fe.Z,QCardSection:ve.Z,QCardActions:he.Z,QSeparator:we.Z,QToggle:be.Z});const _e=(0,r.Uk)("All Coupons"),Ze={class:"q-mb-lg"},De={class:"row"},ke={class:"col-xs-12 col-md-6"},qe={key:0},Ie={key:1},xe={key:0},Ee={key:1};function We(e,o,t,n,a,l){const s=(0,r.up)("page-header"),u=(0,r.up)("date-input"),i=(0,r.up)("CouponsEntryItem"),c=(0,r.up)("q-list"),d=(0,r.up)("q-item-section"),p=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(p,{isLoading:n.isLoading,hasError:n.loadingFailed},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[_e])),_:1}),(0,r._)("div",Ze,[(0,r._)("div",De,[(0,r._)("div",ke,[(0,r.Wm)(u,{modelValue:n.couponsDate,"onUpdate:modelValue":o[0]||(o[0]=e=>n.couponsDate=e),label:"Filter By Date"},null,8,["modelValue"])])])]),n.currentCouponEntries.length>0?((0,r.wg)(),(0,r.iD)("div",qe,[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{bordered:!1,separator:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.currentCouponEntries,(e=>((0,r.wg)(),(0,r.j4)(i,{key:e.date,date:e.date,coupons:e.coupons,onRemoveCoupons:n.removeCoupons},null,8,["date","coupons","onRemoveCoupons"])))),128))])),_:1})])),_:1})])):((0,r.wg)(),(0,r.iD)("div",Ie,[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[null===n.couponsDate||""===n.couponsDate?((0,r.wg)(),(0,r.iD)("p",xe," No Coupon Entries found for the past 7 days ")):((0,r.wg)(),(0,r.iD)("p",Ee,"No Coupon Entries found for this date"))])),_:1})]))])),_:1},8,["isLoading","hasError"])}const Se={class:"row"},Le={class:"col-xs-6"},Qe={class:"col-xs-6"},Me={class:"row q-ml-lg"},Ne={class:"col-xs-12"},Ue={class:"coupons-header q-mb-md"},Ae={class:"col-xs-8 col-sm-8 col-md-5 col-lg-4"},je={class:"col-xs-12 q-mt-lg"},Ve={class:"row"},He={class:"row"},Te={class:"col-xs-12"};function Pe(e,o,t,a,l,s){const u=(0,r.up)("q-item-label"),i=(0,r.up)("q-btn"),c=(0,r.up)("q-icon"),d=(0,r.up)("q-input"),m=(0,r.up)("q-item-section"),g=(0,r.up)("q-toggle"),f=(0,r.up)("q-card");return(0,r.wy)(((0,r.wg)(),(0,r.j4)(f,{class:(0,p.C_)(["q-pa-md q-mt-md",{"today-card-bg":a.isDateToday}])},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r._)("div",Se,[(0,r._)("div",Le,[(0,r.Wm)(u,{class:"date-header"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,p.zw)(a.dateText),1)])),_:1})]),(0,r._)("div",Qe,[(0,r.Wm)(i,{icon:a.isEditMode?"visibility":"edit",outline:"",color:"primary",padding:"xs",size:"md",class:"float-right",onClick:a.enableEditCoupons,title:"Edit/Remove Coupons"},null,8,["icon","onClick"])])]),(0,r._)("div",Me,[(0,r.wy)((0,r._)("div",Ne,[(0,r._)("span",Ue,(0,p.zw)(a.couponsHeaderText),1)],512),[[n.F8,!a.isDateToday]]),(0,r._)("div",Ae,[(0,r.Wm)(d,{label:"Filter by coupon number",modelValue:a.filteredCoupon,"onUpdate:modelValue":o[0]||(o[0]=e=>a.filteredCoupon=e),modelModifiers:{trim:!0},filled:"",dense:""},{prepend:(0,r.w5)((()=>[(0,r.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])]),(0,r._)("div",je,[a.isEditMode?((0,r.wg)(),(0,r.j4)(m,{key:1,style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r._)("div",Ve,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.couponsArray,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"col-xs-3 col-sm-2 col-lg-1"},[(0,r.Wm)(g,{modelValue:a.displayedCouponsArray,"onUpdate:modelValue":o[1]||(o[1]=e=>a.displayedCouponsArray=e),val:e,color:"green",label:e.toString()},null,8,["modelValue","val","label"])])))),128))]),(0,r._)("div",He,[(0,r._)("div",Te,[(0,r.Wm)(i,{label:"Save Changes",type:"button",color:"primary",onClick:a.triggerCouponsRemoval},null,8,["onClick"])])])])),_:1})):((0,r.wg)(),(0,r.j4)(m,{key:0},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,p.zw)(a.couponsValues),1)])),_:1}))])])])),_:1})])),_:1},8,["class"])),[[n.F8,t.coupons.length>0]])}const Ye={name:"CouponsEntryItem",props:["date","coupons"],setup(e,{emit:o}){const t=(0,x.iH)(!1),n=(0,x.iH)(e.coupons),a=(0,x.iH)(""),r=(0,x.iH)(re.ZP.formatDate(Date.now(),"DD-MM-YYYY")),l=(0,x.iH)(r.value===e.date),s=(0,x.Fl)((()=>{let o=e.date;return l.value?"Today - "+o+" - Coupons Total Number : "+e.coupons.length:o})),u=(0,x.Fl)((()=>{let o=e.coupons.length,t="Coupons ( total : "+o+" )";return l.value?"":t})),i=()=>{let o=e.coupons,t=parseInt(a.value);return""!==t&&t>0?o.filter((e=>e===t)):o},c=(0,x.Fl)((()=>i())),d=(0,x.Fl)((()=>{let e=i();return e.length>0?e.join(" , "):"No Coupons found"})),p=()=>{t.value=!t.value},m=()=>{let r=e.coupons.filter((e=>!n.value.includes(e)));o("removeCoupons",{remainingCoupons:n.value,removedCouponNumbers:r,date:e.date}),t.value=!1,a.value=""};return{dateText:s,couponsHeaderText:u,filteredCoupon:a,couponsValues:d,displayedCouponsArray:n,couponsArray:c,isEditMode:t,enableEditCoupons:p,triggerCouponsRemoval:m,isDateToday:l}}},Oe=(0,f.Z)(Ye,[["render",Pe],["__scopeId","data-v-66130975"]]),Fe=Oe;C()(Ye,"components",{QCard:fe.Z,QItemSection:h.Z,QItemLabel:b.Z,QBtn:U.Z,QInput:ge.Z,QIcon:w.Z,QToggle:be.Z});var Be=t(5787);const Re={components:{CouponsEntryItem:Fe},setup(){(0,E.oR)();const e=(0,x.iH)("");let{loadCoupons:o,currentCouponData:t,isLoading:n,loadingFailed:a}=de(),{dispatchAction:r}=(0,W.Z)();o();const l=(0,x.Fl)((()=>{const o=e.value;return""!==o&&null!==o?t.value.filter((e=>o===e.date)):t.value})),s=async e=>{let o=t.value.find((o=>o.date===e.date)),n=o.coupons.filter((o=>e.remainingCoupons.includes(o)));const a={date:e.date,newCoupons:n,removedCouponNumbers:e.removedCouponNumbers},l=()=>{Be.Z.successNotify("Coupons for "+e.date+" have been updated")};r("coupons/deleteCouponEntries",a,l)};return{currentCouponEntries:l,couponsDate:e,removeCoupons:s,loadCoupons:o,currentCouponData:t,isLoading:n,loadingFailed:a}}},ze=(0,f.Z)(Re,[["render",We]]),Ke=ze;C()(Re,"components",{QItemSection:h.Z,QList:k.Z});const $e=(0,r.Uk)("Export Monthly Coupons"),Je={class:"flex justify-center"},Ge={class:"column"},Xe=(0,r.Uk)(" Selected Month : "),eo={class:"flex justify-center q-mt-lg"};function oo(e,o,t,n,a,l){const s=(0,r.up)("page-header"),u=(0,r.up)("month-picker"),i=(0,r.up)("q-btn"),c=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[$e])),_:1}),(0,r._)("div",Je,[(0,r._)("div",Ge,[(0,r._)("p",null,[Xe,(0,r._)("b",null,(0,p.zw)(n.currentMonthInfoText),1)]),(0,r.Wm)(u,{"default-month":n.defaultMonth,"show-year":!1,"max-date":n.maxDate,onInput:n.setSelectedMonth,onChange:n.setDefaultMonth},null,8,["default-month","max-date","onInput","onChange"]),(0,r._)("div",eo,[(0,r.Wm)(i,{label:"Export",type:"button",color:"primary",padding:"0.81rem",size:"md",onClick:n.downloadExport},null,8,["onClick"])])])])])),_:1})}t(7965),t(6016);var to=t(4045),no=t(9909),ao=t(5474);const ro={components:{MonthPicker:to.lH},setup(){(0,E.oR)();let{axiosCall:e}=(0,no.Z)(),{handleServerError:o}=(0,W.Z)();const t=(0,x.iH)((new Date).getMonth()+1),n=(0,x.iH)(new Date),a=(0,x.iH)(t.value),r=(0,x.iH)(""),l=(0,x.Fl)((()=>r.value+" - "+(new Date).getFullYear()));return{maxDate:n,defaultMonth:t,selectedMonthText:r,selectedMonthIndex:a,currentMonthInfoText:l,axiosCall:e,async downloadExport(){await ao.api.get("/api/exports/monthly-coupons",{params:{month:parseInt(a.value)},responseType:"blob"}).then((e=>{const o=document.createElement("a");o.href=window.URL.createObjectURL(new Blob([e.data]));const t=r.value+"_"+(new Date).getFullYear();o.setAttribute("download",t+".xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o)})).catch((e=>{o(e)}))},setDefaultMonth(e){r.value=e.month},setSelectedMonth(e){r.value=e.month,a.value=e.monthIndex}}}},lo=(0,f.Z)(ro,[["render",oo]]),so=lo;C()(ro,"components",{QBtn:U.Z});const uo=(0,r._)("h2",null,"Welcome to Qpon App",-1);function io(e,o,t,n,a,l){const s=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(s,{class:"flex flex-center"},{default:(0,r.w5)((()=>[uo])),_:1})}const co=(0,r.aZ)({name:"Index"});var po=t(4379);const mo=(0,f.Z)(co,[["render",io]]),go=mo;C()(co,"components",{QPage:po.Z});var fo=t(8377);const vo=(0,r.Uk)("User Info"),ho=(0,r._)("div",{class:"q-mb-lg"},[(0,r._)("div",{class:"row"},[(0,r._)("div",{class:"col-xs-12 col-md-6"})])],-1);function wo(e,o,t,n,a,l){const s=(0,r.up)("page-header"),u=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[vo])),_:1}),ho])),_:1})}const bo={setup(){(0,E.oR)();const{dispatchAction:e}=(0,W.Z)();return{dispatchAction:e}}},yo=(0,f.Z)(bo,[["render",wo]]),Co=yo,_o=[{path:"/",name:"index",component:go},{path:"/login",name:"login",component:fo.Z},{path:"/add-coupon",name:"add-coupon",component:Ce},{path:"/coupons",name:"coupons",component:Ke},{path:"/export-coupons",name:"export-coupons",component:so},{path:"/user",name:"user",component:Co},{path:"/:catchAll(.*)*",component:()=>t.e(681).then(t.bind(t,681))}],Zo=_o,Do=(0,F.BC)((function({store:e}){const o=S.r5,t=(0,S.p7)({scrollBehavior:()=>({left:0,top:0}),routes:Zo,history:o("")});return t.beforeEach(((o,t,n)=>{const a=e.getters["auth/getIsLoggedIn"],r="/login"===o.path;a||r?a&&r?n("/"):n():n("/login")})),t}));async function ko(e,o){const n="function"===typeof O["default"]?await(0,O["default"])({}):O["default"],{storeKey:r}=await Promise.resolve().then(t.bind(t,9922)),l="function"===typeof Do?await Do({store:n}):Do;n.$router=l;const s=e(Y);return s.use(a.Z,o),{app:s,store:n,storeKey:r,router:l}}var qo=t(6417),Io=t(2147);const xo={config:{},components:{QBtn:U.Z},plugins:{Notify:qo.Z,Dialog:Io.Z}},Eo="";async function Wo({app:e,router:o,store:t,storeKey:n},a){let r=!1;const l=e=>{try{return o.resolve(e).href}catch(t){}return Object(e)===e?null:e},s=e=>{if(r=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const o=l(e);null!==o&&(window.location.href=o,window.location.reload())},u=window.location.href.replace(window.location.origin,"");for(let c=0;!1===r&&c<a.length;c++)try{await a[c]({app:e,router:o,store:t,ssrContext:null,redirect:s,urlPath:u,publicPath:Eo})}catch(i){return i&&i.url?void s(i.url):void console.error("[Quasar] boot error:",i)}!0!==r&&(e.use(o),e.use(t,n),e.mount("#q-app"))}ko(n.ri,xo).then((e=>Promise.all([Promise.resolve().then(t.bind(t,5474)),Promise.resolve().then(t.bind(t,324))]).then((o=>{const t=o.map((e=>e.default)).filter((e=>"function"===typeof e));Wo(e,t)}))))},324:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Y});var n=t(7083),a=t(3673);const r={class:"row items-center justify-end"};function l(e,o,t,n,l,s){const u=(0,a.up)("q-btn"),i=(0,a.up)("q-date"),c=(0,a.up)("q-popup-proxy"),d=(0,a.up)("q-icon"),p=(0,a.up)("q-input"),m=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(p,{filled:"",modelValue:t.couponsDate,"onUpdate:modelValue":n.updateDate,mask:"##-##-####",label:""!==t.label?t.label:"","error-message":t.errorMessage,error:t.hasError},{prepend:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:t.couponsDate,"onUpdate:modelValue":n.updateDate,options:n.dateOptions,mask:"DD-MM-YYYY",minimal:""},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.wy)((0,a.Wm)(u,{label:"Close",color:"primary",flat:""},null,512),[[m]])])])),_:1},8,["modelValue","onUpdate:modelValue","options"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","label","error-message","error"])}var s=t(2661),u=t(1959);const i={props:{label:{type:String,required:!1,default:""},errorMessage:{type:String,required:!1,default:""},hasError:{type:Boolean,required:!1,default:!1},couponsDate:{type:Object,required:!1,default:null}},emits:["update:modelValue"],setup(e,{emit:o}){const t=s.ZP.formatDate(new Date,"DD-MM-YYYY").split("-"),n=(0,u.iH)(new Date(t[2],parseInt(t[1])-1,t[0]));return{updateDate(e){o("update:modelValue",e)},dateOptions(e){let o=e.split("/");const t=new Date(o[0],parseInt(o[1])-1,o[2]),a=s.ZP.getDayOfWeek(t),r=6===a||7===a;if(r)return!1;const l=s.ZP.getDateDiff(n.value,t,"days");return!(l>8||l<0)}}}};var c=t(4260),d=t(1206),p=t(4554),m=t(3944),g=t(643),f=t(6819),v=t(677),h=t(7518),w=t.n(h);const b=(0,c.Z)(i,[["render",l]]),y=b;w()(i,"components",{QInput:d.Z,QIcon:p.Z,QPopupProxy:m.Z,QDate:g.Z,QBtn:f.Z}),w()(i,"directives",{ClosePopup:v.Z});const C={class:"text-center"};function _(e,o){return(0,a.wg)(),(0,a.iD)("header",null,[(0,a._)("h5",C,[(0,a.WI)(e.$slots,"default")])])}const Z={},D=(0,c.Z)(Z,[["render",_]]),k=D,q={class:"row q-pa-md"},I={class:"col-xs-12"},x={key:0,class:"container-section"},E={key:1,class:"flex justify-center q-pa-lg"},W=(0,a._)("h3",null,"An error occured while loading this page",-1),S=[W],L={key:2,class:"flex justify-center q-pa-xl q-mt-xl"};function Q(e,o,t,n,r,l){const s=(0,a.up)("base-spinner");return(0,a.wg)(),(0,a.iD)("section",q,[(0,a._)("div",I,[t.isLoading||t.hasError?!t.isLoading&&t.hasError?((0,a.wg)(),(0,a.iD)("div",E,S)):((0,a.wg)(),(0,a.iD)("div",L,[(0,a.Wm)(s)])):((0,a.wg)(),(0,a.iD)("div",x,[(0,a.WI)(e.$slots,"default")]))])])}const M={props:{isLoading:{type:Boolean,required:!1,default:!1},hasError:{type:Boolean,required:!1,default:!1}}},N=(0,c.Z)(M,[["render",Q]]),U=N;function A(e,o){const t=(0,a.up)("q-spinner");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(t,{color:"primary",size:"3em",thickness:10})])}var j=t(9754);const V={},H=(0,c.Z)(V,[["render",A]]),T=H;w()(V,"components",{QSpinner:j.Z});var P=t(8377);const Y=(0,n.xr)((({app:e})=>{e.component("date-input",y),e.component("page-header",k),e.component("container",U),e.component("login",P.Z),e.component("base-spinner",T)}))},5474:(e,o,t)=>{t.r(o),t.d(o,{default:()=>s,api:()=>l});var n=t(7083),a=t(52),r=t.n(a);const l=r().create({withCredentials:!0,baseURL:"https://equponi.info/app/"}),s=(0,n.xr)((({app:e})=>{e.config.globalProperties.$axios=r(),e.config.globalProperties.$api=l}))},9922:(e,o,t)=>{t.r(o),t.d(o,{default:()=>y});var n=t(7083),a=t(3617);function r(){return{availableCouponNumbers:[],couponEntries:[],shouldUpdateCoupons:!0,shouldUpdateAvailableCouponNumbers:!0}}const l={shouldUpdateCoupons(e){return e.shouldUpdateCoupons},shouldUpdateAvailableCouponNumbers(e){return e.shouldUpdateAvailableCouponNumbers},getAvailableCouponNumbers(e){return e.availableCouponNumbers},getCouponEntries:e=>(o=null)=>e.couponEntries},s={setShouldUpdateCouponEntries(e,o){e.shouldUpdateCoupons=o},setCouponEntries(e,o){e.couponEntries=o,e.shouldUpdateCoupons=!1},setAvailableCouponNumbers(e,o){e.availableCouponNumbers=o,e.shouldUpdateAvailableCouponNumbers=!1},updateCouponsByDate(e,o){e.couponEntries[o.indexByDate].coupons=o.coupons}};var u=t(9909),i=t(5787);let{axiosCall:c}=(0,u.Z)();const d={async saveCouponEntries(e,o){const t={couponsDate:o.date,coupons:o.coupons},n=e=>{i.Z.successNotify(e)};await c("post","/api/coupons/store",t,n),e.commit("setShouldUpdateCouponEntries",!0)},async loadCouponEntries(e){if(!e.getters.shouldUpdateCoupons)return;const o=o=>{let t=o.map((e=>({date:e.date,coupons:e.coupons.split(",").map((e=>parseInt(e)))})));e.commit("setCouponEntries",t)};await c("get","/api/coupons",{},o)},async loadAvailableCouponNumbers(e){if(!e.getters.shouldUpdateAvailableCouponNumbers)return;const o=o=>{e.commit("setAvailableCouponNumbers",o)};await c("get","/api/coupons/available",{},o)},async deleteCouponEntries(e,o){const t=o.date,n={date:t,coupons:o.removedCouponNumbers.join(",")};await c("post","/api/coupons/destroy",n);const a=e.getters.getCouponEntries().findIndex((e=>e.date===t));e.commit("updateCouponsByDate",{indexByDate:a,coupons:o.newCoupons})}},p={namespaced:!0,state:r,getters:l,mutations:s,actions:d};function m(){return{isLoggedIn:!1,user:{}}}const g={getIsLoggedIn(e){return null!==e.isLoggedIn&&(e.isLoggedIn||localStorage.getItem("loginState")&&1===parseInt(localStorage.getItem("loginState")))},getLoggedInUser(e){return e.user}},f={setIsLoggedIn(e,o){e.isLoggedIn=o},setUser(e,o){e.user=o}};var v=t(5474);let{axiosCall:h}=(0,u.Z)();const w={async login(e,o){await v.api.get("/sanctum/csrf-cookie");const t=o=>{e.commit("setIsLoggedIn",!0),localStorage.setItem("loginState","1")};await h("post","/login",o,t)},async logout(e){const o=o=>{e.commit("setIsLoggedIn",!1),localStorage.removeItem("loginState")};await h("post","/logout",{},o)},async expireSession(e){e.commit("setIsLoggedIn",!1),localStorage.removeItem("loginState")}},b={namespaced:!0,state:m,getters:g,mutations:f,actions:w},y=(0,n.h)((function(){const e=(0,a.MT)({modules:{coupons:p,auth:b},strict:!1});return e}))},3964:(e,o,t)=>{t.d(o,{Z:()=>s});t(5363);var n=t(5787),a=t(3617),r=t(1959),l=t(9582);function s(){const e=(0,a.oR)(),o=(0,l.tv)(),t=(0,r.iH)({}),s=(o,t=null,n=null,a=null)=>{e.dispatch(o,t).then((()=>{null!==n&&n()})).catch((e=>{u(e.message),null!==a&&a(e)}))},u=t=>{let a,r=JSON.parse(t);if(422!==r.status){401===r.status&&(n.Z.warningNotify("Session expired, please login again"),e.dispatch("auth/expireSession"),o.replace("/login"));try{const e=JSON.parse(r.message);a=e.message}catch{a="An error occured!"}n.Z.errorNotify(a)}else i(r.validationErrors)},i=e=>{let o=!1,a=t.value;for(const n in a){t.value[n].hasError=!1,t.value[n].errorMessage="";for(const a in e)n===a&&(t.value[n].hasError=!0,t.value[n].errorMessage=e[a][0],o=!0)}if(!o){let o=[];for(const t in e)o.push(e[t]);n.Z.errorNotify(o.join(" , "))}};return{dispatchAction:s,formSchema:t}}},5787:(e,o,t)=>{t.d(o,{Z:()=>u});var n=t(6417);const a=(e,o,t,a="white")=>{n.Z.create({position:o,message:e,color:t,actions:[{label:"Dismiss",color:a}],textColor:a})},r=e=>{a(e,"bottom","green")},l=e=>{a(e,"bottom","red")},s=e=>{a(e,"bottom","yellow","black")},u={successNotify:r,errorNotify:l,warningNotify:s}},9909:(e,o,t)=>{t.d(o,{Z:()=>a});t(2100);var n=t(5474);function a(){const e=(e,o)=>{null!==o&&o(e);const t=e.request;let n={status:t.status,message:"Error Occured..",validationErrors:{}};throw t.status>=501&&(n.message=t.response),422===t.status&&(n.validationErrors=JSON.parse(t.response).errors),new Error(JSON.stringify(n))},o=async(o,t,a={},r=null,l=null)=>{let s;s="post"===o?await n.api.post(t,a).then((e=>{null!==r&&(console.log("calling on success now"),r(e.data),console.log("FINISH on success now"))})).catch((o=>{e(o,l)})):await n.api.get(t,{params:a}).then((e=>{null!==r&&r(e.data)})).catch((o=>{e(o,l)}))};return{axiosCall:o}}},8377:(e,o,t)=>{t.d(o,{Z:()=>I});var n=t(3673);const a=(0,n.Uk)("Qpon App"),r={class:"row justify-center"},l={class:"col-xs-10 col-sm-9 col-md-5"},s=(0,n.Uk)("Login"),u={class:"row justify-center"};function i(e,o,t,i,c,d){const p=(0,n.up)("q-toolbar-title"),m=(0,n.up)("q-toolbar"),g=(0,n.up)("q-header"),f=(0,n.up)("page-header"),v=(0,n.up)("q-icon"),h=(0,n.up)("q-input"),w=(0,n.up)("q-btn"),b=(0,n.up)("q-form"),y=(0,n.up)("q-card"),C=(0,n.up)("container");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(g,{elevated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[a])),_:1})])),_:1})])),_:1}),(0,n.Wm)(C,{class:"q-mt-xl",isLoading:i.loggingIn},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n._)("div",l,[(0,n.Wm)(y,{class:"q-pa-lg"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[s])),_:1}),(0,n.Wm)(b,{onSubmit:i.login,class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{filled:"",modelValue:i.email,"onUpdate:modelValue":o[0]||(o[0]=e=>i.email=e),modelModifiers:{number:!0},label:"Email","lazy-rules":"ondemand",rules:[i.formSchema.email.validate],"error-message":i.formSchema.email.errorMessage,error:i.formSchema.email.hasError},{prepend:(0,n.w5)((()=>[(0,n.Wm)(v,{name:"email"})])),_:1},8,["modelValue","rules","error-message","error"]),(0,n.Wm)(h,{filled:"",modelValue:i.password,"onUpdate:modelValue":o[1]||(o[1]=e=>i.password=e),modelModifiers:{number:!0},label:"Password","lazy-rules":"ondemand",rules:[i.formSchema.password.validate],"error-message":i.formSchema.password.errorMessage,error:i.formSchema.password.hasError},{prepend:(0,n.w5)((()=>[(0,n.Wm)(v,{name:"lock"})])),_:1},8,["modelValue","rules","error-message","error"]),(0,n._)("div",u,[(0,n.Wm)(w,{label:"Login",type:"submit",color:"primary",class:"full-width",padding:"0.81rem"})])])),_:1},8,["onSubmit"])])),_:1})])])])),_:1},8,["isLoading"])])}t(5363);var c=t(1959),d=t(3617),p=t(9582),m=t(3964);const g={setup(){(0,d.oR)();const e=(0,p.tv)(),o=(0,c.iH)(""),t=(0,c.iH)(""),n=(0,c.iH)(!1);let{dispatchAction:a,formSchema:r}=(0,m.Z)();return r.value={email:{validate:function(e){return!0},hasError:!1,errorMessage:""},password:{validate:function(){return!0},hasError:!1,errorMessage:""}},{formSchema:r,email:o,password:t,loggingIn:n,login(){n.value=!0;const r={email:o.value,password:t.value},l=()=>{e.replace("/")};a("auth/login",r,l),n.value=!1}}}};var f=t(4260),v=t(3812),h=t(9570),w=t(3747),b=t(151),y=t(8689),C=t(1206),_=t(4554),Z=t(6819),D=t(7518),k=t.n(D);const q=(0,f.Z)(g,[["render",i]]),I=q;k()(g,"components",{QHeader:v.Z,QToolbar:h.Z,QToolbarTitle:w.Z,QCard:b.Z,QForm:y.Z,QInput:C.Z,QIcon:_.Z,QBtn:Z.Z})}},o={};function t(n){var a=o[n];if(void 0!==a)return a.exports;var r=o[n]={exports:{}};return e[n](r,r.exports,t),r.exports}t.m=e,(()=>{var e=[];t.O=(o,n,a,r)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){for(var[n,a,r]=e[c],s=!0,u=0;u<n.length;u++)(!1&r||l>=r)&&Object.keys(t.O).every((e=>t.O[e](n[u])))?n.splice(u--,1):(s=!1,r<l&&(l=r));if(s){e.splice(c--,1);var i=a();void 0!==i&&(o=i)}}return o}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,a,r]}})(),(()=>{t.n=e=>{var o=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(o,{a:o}),o}})(),(()=>{t.d=(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((o,n)=>(t.f[n](e,o),o)),[]))})(),(()=>{t.u=e=>"js/"+e+".80280b88.js"})(),(()=>{t.miniCssF=e=>"css/"+{143:"app",736:"vendor"}[e]+"."+{143:"beb3fdac",736:"d54ea0e3"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{var e={},o="quasar-coupon:";t.l=(n,a,r,l)=>{if(e[n])e[n].push(a);else{var s,u;if(void 0!==r)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var d=i[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==o+r){s=d;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",o+r),s.src=n),e[n]=[a];var p=(o,t)=>{s.onerror=s.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(t))),o)return o(t)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.p=""})(),(()=>{var e={143:0};t.f.j=(o,n)=>{var a=t.o(e,o)?e[o]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise(((t,n)=>a=e[o]=[t,n]));n.push(a[2]=r);var l=t.p+t.u(o),s=new Error,u=n=>{if(t.o(e,o)&&(a=e[o],0!==a&&(e[o]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;s.message="Loading chunk "+o+" failed.\n("+r+": "+l+")",s.name="ChunkLoadError",s.type=r,s.request=l,a[1](s)}};t.l(l,u,"chunk-"+o,o)}},t.O.j=o=>0===e[o];var o=(o,n)=>{var a,r,[l,s,u]=n,i=0;if(l.some((o=>0!==e[o]))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(u)var c=u(t)}for(o&&o(n);i<l.length;i++)r=l[i],t.o(e,r)&&e[r]&&e[r][0](),e[l[i]]=0;return t.O(c)},n=self["webpackChunkquasar_coupon"]=self["webpackChunkquasar_coupon"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))})();var n=t.O(void 0,[736],(()=>t(1259)));n=t.O(n)})();